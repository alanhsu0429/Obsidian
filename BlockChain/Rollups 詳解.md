# Rollups 詳解

Rollups 是一種 Layer 2 擴展方案，它在鏈下執行交易，然後將多個交易打包（Rollup）成一個單一的批次，並將這個批次的數據或證明提交到 Layer 1 區塊鏈。這樣可以大幅減少 Layer 1 的負載，提高交易吞吐量並降低費用。

## Rollups 的核心思想

*   **鏈下執行**：大部分的計算和狀態儲存都在 Layer 2 進行。
*   **鏈上數據/證明**：將壓縮後的交易數據或有效性證明提交到 Layer 1，確保 Layer 1 的安全性。
*   **繼承 Layer 1 安全性**：Rollups 的安全性最終依賴於底層的 Layer 1 區塊鏈。

## 兩種主要類型

### 1. Optimistic Rollups (樂觀 Rollups)

*   **運作原理**：
    *   假設所有鏈下交易都是有效的，並將壓縮後的交易數據提交到 Layer 1。
    *   存在一個「挑戰期」（通常為 7 天），在此期間，任何人都可以提交「欺詐證明」（Fraud Proof）來證明某個批次中的交易是無效的。
    *   如果欺詐證明被驗證為真，則該批次的所有交易都會被回滾，並懲罰提交錯誤批次的排序器（Sequencer）。
*   **優點**：
    *   技術實現相對簡單。
    *   與 EVM (Ethereum Virtual Machine) 相容性高，便於現有 DApp 遷移。
*   **缺點**：
    *   提款到 Layer 1 需要等待挑戰期結束（約 7 天），使用者體驗較差。
    *   需要活躍的監控者來提交欺詐證明。
*   **範例**：
    *   **Optimism**
    *   **Arbitrum**

### 2. ZK-Rollups (零知識 Rollups)

*   **運作原理**：
    *   在鏈下執行交易後，生成一個加密證明（零知識證明，如 SNARK 或 STARK），證明這些交易是有效的，而無需揭露交易的具體內容。
    *   這個證明會被提交到 Layer 1 上的智能合約進行驗證。一旦證明被驗證，該批次的交易就被視為最終確定。
*   **優點**：
    *   提款到 Layer 1 幾乎是即時的，因為有效性已經透過加密證明保證。
    *   安全性更高，無需挑戰期。
    *   數據壓縮效率更高。
*   **缺點**：
    *   生成零知識證明需要大量的計算資源，技術實現複雜。
    *   與 EVM 相容性較差，DApp 遷移和開發難度較大（但正在改進，如 zkEVM）。
*   **範例**：
    *   **zkSync**
    *   **StarkNet**
    *   **Polygon zkEVM**

## Rollups 的重要性

Rollups 被認為是以太坊等 Layer 1 區塊鏈實現大規模擴展的關鍵技術，它們在不犧牲去中心化和安全性的前提下，顯著提升了交易處理能力。

[[Layer 2 擴展方案]]
