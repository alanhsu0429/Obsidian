# 2.1.2. 特徵工程

[[2. 核心組成/2.1. 數據 (Data)|數據]]經過[[2. 核心組成/2.1. 數據/2.1.1. 數據清洗與預處理|清洗與預處理]]後，下一步就是[[2. 核心組成/2.1. 數據/2.1.2. 特徵工程|特徵工程]]。特徵工程是將原始數據轉換為模型可以理解和學習的特徵的過程，它直接影響模型的性能和策略的有效性。在期貨量化交易中，特徵工程旨在從市場數據中提取出對未來價格走勢或市場行為具有預測能力的信號。

## 什麼是特徵？

特徵（Features）是數據中用於描述觀察對象（例如，某個時間點的期貨合約）的屬性。在量化交易中，這些特徵可以是：

-   **技術指標**：如移動平均線、RSI、MACD、布林通道等。
-   **價格衍生特徵**：如收益率、波動率、價差、高低點差等。
-   **成交量衍生特徵**：如成交量變化率、成交量分佈等。
-   **基本面數據**：如庫存、產量、利率、宏觀經濟指標等。
-   **另類數據**：如新聞情緒、社交媒體熱度等。

## 特徵工程的重要性

1.  **提升模型性能**：好的特徵能夠更好地捕捉數據中的潛在模式，使模型更容易學習到有效的交易規律，從而提高預測準確性和策略收益。
2.  **降低模型複雜度**：透過提取有意義的特徵，可以減少模型需要處理的原始數據量，有助於簡化模型結構，降低[[2.3. 回測/2.3.1. 回測偏差與陷阱#過度擬合（Overfitting）|過度擬合]]的風險。
3.  **提高模型可解釋性**：精心設計的特徵往往具有明確的金融意義，有助於理解模型的決策邏輯。
4.  **適應市場變化**：透過動態生成和選擇特徵，可以使策略更好地適應不斷變化的市場環境。

## 常見的特徵工程方法

1.  **基於技術指標的特徵**：
    *   **移動平均線 (MA)**：不同週期的MA值、MA的斜率、MA之間的交叉。
    *   **相對強弱指標 (RSI)**：RSI值、RSI的變化率、RSI的超買超賣信號。
    *   **MACD**：MACD線、信號線、MACD柱狀圖及其交叉。
    *   **布林通道 (Bollinger Bands)**：價格與通道邊界的距離、通道寬度。
    *   **波動率指標**：如ATR (Average True Range)。

2.  **基於價格行為的特徵**：
    *   **收益率 (Returns)**：日收益率、週收益率、對數收益率。
    *   **波動率 (Volatility)**：歷史波動率、隱含波動率。
    *   **價差 (Spreads)**：開盤價與收盤價之差、高低點之差。
    *   **價格形態**：如K線形態（錘頭、射擊之星等），可透過模式識別演算法提取。

3.  **基於成交量的特徵**：
    *   **成交量變化率**：當前成交量與過去成交量的比率。
    *   **能量潮 (On-Balance Volume, OBV)**：累積成交量，反映資金流向。
    *   **成交量分佈**：不同價格區間的成交量分佈。

4.  **時間相關特徵**：
    *   **時間週期**：星期幾、月份、季度、年份，捕捉季節性或週期性效應。
    *   **交易時段**：開盤、收盤、盤中等不同時段的特徵。

5.  **交互特徵 (Interaction Features)**：
    *   將兩個或多個原始特徵進行組合，創造新的特徵。例如，價格與成交量的乘積，或不同技術指標的組合。

6.  **降維 (Dimensionality Reduction)**：
    *   當特徵數量過多時，可以使用主成分分析 (PCA) 等方法減少特徵維度，同時保留大部分信息，避免「維度災難」。

## 特徵工程的原則

-   **領域知識驅動**：結合金融市場的專業知識來設計特徵，而不是盲目地生成。
-   **避免未來函數**：確保特徵的計算只使用當前或過去的數據。
-   **特徵選擇 (Feature Selection)**：在生成大量特徵後，需要透過統計方法或機器學習演算法（如Lasso迴歸、隨機森林的重要性評分）來選擇最相關、最有預測能力的特徵，去除冗餘和噪音。
-   **持續迭代**：特徵工程是一個不斷嘗試、評估和改進的迭代過程。

有效的特徵工程是將原始數據轉化為「智慧」的過程，是量化策略成功的關鍵環節之一。