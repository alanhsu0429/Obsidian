# 2.3. 回測 (Backtesting)

回測（Backtesting）是量化交易策略開發過程中至關重要的一步。它指的是利用歷史市場數據來模擬交易策略的表現，以評估其潛在的盈利能力、風險水平和穩健性。

## 回測的重要性

-   **驗證策略邏輯**：在投入真實資金之前，回測可以幫助交易者驗證策略的買賣邏輯是否合理有效。
-   **評估策略性能**：透過回測，可以獲得一系列關鍵的性能指標，量化策略的優劣。
-   **優化策略參數**：根據回測結果，可以對策略中的參數進行調整和優化，以期獲得更好的表現。
-   **識別潛在風險**：回測可以揭示策略在不同市場情境下的表現，幫助識別潛在的風險點，如最大回撤。

## 回測的關鍵指標

1.  **總收益 (Total Return)**：策略在回測期間的總體收益率。
2.  **年化收益 (Annualized Return)**：將總收益率年化，便於不同時間長度策略的比較。
3.  **最大回撤 (Max Drawdown)**：從資金最高點到最低點的最大跌幅，衡量策略可能面臨的最大虧損風險。
4.  **夏普比率 (Sharpe Ratio)**：衡量單位風險所帶來的超額收益，比率越高表示策略的風險調整後收益越好。
    *   公式：`(策略年化收益 - 無風險利率) / 策略年化波動率`
5.  **索提諾比率 (Sortino Ratio)**：與夏普比率類似，但只考慮下行波動率（即虧損的波動），更能反映策略在不利市場下的表現。
6.  **勝率 (Win Rate)**：盈利交易次數佔總交易次數的比例。
7.  **盈虧比 (Profit/Loss Ratio)**：平均盈利金額與平均虧損金額之比。
8.  **交易次數 (Number of Trades)**：策略在回測期間執行的總交易次數。
9.  **阿爾法 (Alpha)**：策略相對於基準指數的超額收益。
10. **貝塔 (Beta)**：策略收益相對於基準指數收益的敏感度。

## 回測的流程

1.  **數據準備**：獲取高質量、無[[2.1. 數據 (Data)#數據偏差 (Data Biases)|未來函數]]的歷史行情數據，並進行清洗和處理。
2.  **策略編碼**：將交易策略的邏輯用程式語言實現。
3.  **執行回測**：將編碼好的策略應用於歷史數據，模擬交易過程。
4.  **結果分析**：計算並分析上述關鍵指標，評估策略性能。
5.  **優化與迭代**：根據分析結果，調整策略參數或邏輯，重複回測過程。詳見[[2. 核心組成/2.3. 回測/2.3.2. 策略優化與穩健性測試|策略優化與穩健性測試]]。

## 回測的常見陷阱與注意事項

回測過程中需特別注意各種偏差與陷阱，詳見[[2. 核心組成/2.3. 回測/2.3.1. 回測偏差與陷阱|回測偏差與陷阱]]。

嚴謹的回測是量化交易成功的基石，但必須警惕其潛在的陷阱。