# 2.4.1. 訂單類型與演算法交易

在[[2. 核心組成/2.4. 執行系統 (Execution System)|期貨量化交易執行系統]]中，理解不同的訂單類型以及如何運用[[2.4.1. 訂單類型與演算法交易#演算法交易 (Algorithmic Trading)|演算法交易]]來優化訂單執行，對於降低交易成本、減少市場衝擊和提高策略收益至關重要。

## 常見的訂單類型

1.  **市價單 (Market Order)**：
    *   **定義**：以當前市場上可獲得的最佳價格立即成交的訂單。
    *   **特點**：保證成交，但不保證成交價格。在流動性差或波動劇烈的市場中，可能產生較大的[[2.3. 回測/2.3.1. 回測偏差與陷阱#交易成本與滑點的忽略|滑點]]。
    *   **適用場景**：對成交速度要求極高，對價格敏感度較低的交易。

2.  **限價單 (Limit Order)**：
    *   **定義**：指定一個買入或賣出價格的訂單。買入限價單只能以指定價格或更低價格成交；賣出限價單只能以指定價格或更高價格成交。
    *   **特點**：保證成交價格（或更好），但不保證成交。如果市場價格未達到指定價格，訂單可能無法成交。
    *   **適用場景**：對成交價格有嚴格要求，對成交速度敏感度較低的交易，或希望在特定價格掛單等待。

3.  **止損單 (Stop Order)**：
    *   **定義**：當市場價格達到預設的「觸發價格」（Stop Price）時，止損單會被觸發並轉變為市價單或限價單。
    *   **止損市價單 (Stop Market Order)**：觸發後立即以市價成交。保證成交，但不保證價格。
    *   **止損限價單 (Stop Limit Order)**：觸發後轉變為限價單，以指定價格或更好價格成交。不保證成交，但保證價格。
    *   **適用場景**：[[4.2. 停損與停利|限制虧損]]，保護利潤。

4.  **止盈單 (Take-Profit Order)**：
    *   **定義**：與止損單類似，當市場價格達到預設的「目標價格」時，觸發並平倉以鎖定利潤。通常也是一種限價單或市價單的變體。
    *   **適用場景**：[[4.2. 停損與停利|鎖定利潤]]。

5.  **追蹤止損單 (Trailing Stop Order)**：
    *   **定義**：止損價格會隨著有利方向的價格變動而自動調整，但不會反向調整。例如，做多時，止損點會隨著價格上漲而上移，但價格下跌時止損點保持不變。
    *   **適用場景**：在保護利潤的同時，允許利潤奔跑。

## 演算法交易 (Algorithmic Trading)

演算法交易（Algo Trading）是指使用電腦程式和預設的演算法來自動執行交易決策和訂單執行的過程。它不僅僅是自動下單，更重要的是透過演算法來優化訂單的執行方式，以達到特定的交易目標（如最小化交易成本、減少市場衝擊）。

### 演算法交易的目標

-   **最小化交易成本**：減少滑點和佣金。
-   **減少市場衝擊**：避免大額訂單對市場價格造成不利影響。
-   **提高成交率**：在不影響價格的前提下，盡可能多地成交。
-   **隱藏交易意圖**：避免被其他市場參與者察覺交易意圖。

### 常見的演算法交易策略

1.  **VWAP (Volume Weighted Average Price)**：
    *   **目標**：在指定時間段內，以接近成交量加權平均價格的價格完成交易。
    *   **原理**：演算法會根據歷史成交量分佈，將大額訂單拆分成小額訂單，並在不同時間點執行，力求與市場的成交量分佈保持一致。

2.  **TWAP (Time Weighted Average Price)**：
    *   **目標**：在指定時間段內，以接近時間加權平均價格的價格完成交易。
    *   **原理**：將大額訂單拆分成小額訂單，並在指定時間段內均勻地執行，不考慮成交量分佈。

3.  **冰山訂單 (Iceberg Order)**：
    *   **目標**：隱藏大額訂單的真實數量，減少對市場的衝擊。
    *   **原理**：只顯示訂單總量的一小部分在委託簿中，當這部分成交後，會自動補充下一部分，直到訂單全部成交。

4.  **百分比成交量 (Percentage of Volume, POV)**：
    *   **目標**：在指定時間段內，以市場總成交量的某個固定百分比來執行訂單。
    *   **原理**：演算法會實時監控市場成交量，並動態調整自己的下單速度，以維持預設的成交量佔比。

5.  **套利演算法 (Arbitrage Algorithms)**：
    *   **目標**：利用不同市場或不同資產之間的微小價差進行無風險或低風險套利。
    *   **原理**：監控多個市場的報價，一旦發現價差，立即同時下單買入低價資產並賣出高價資產。

## 演算法交易的挑戰

-   **技術複雜性**：需要強大的[[5.1. 技術棧 (Tech Stack)|技術棧]]和低延遲的[[2.4. 執行系統 (Execution System)|執行系統]]。
-   **市場微觀結構**：演算法需要對市場的微觀結構有深入理解，才能有效應對其他演算法交易者。
-   **監管合規**：演算法交易受到越來越嚴格的監管。

透過精確選擇訂單類型和運用演算法交易，量化交易者可以更有效地管理交易執行，將策略的理論優勢轉化為實際的交易利潤。